From ec9096d68393b72a7b7ae75da27f4020921a107c Mon Sep 17 00:00:00 2001
From: Limeng <Meng.Li@windriver.com>
Date: Wed, 17 Jul 2019 09:38:22 +0800
Subject: [PATCH] kernel-module-gles: fix build issue

Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 .../config/compilers/{aarch64-poky-linux.mk => aarch64-wrs-linux.mk}    | 0
 services/server/devices/rgx/rgxfwutils.c                                | 2 +-
 services/server/env/linux/km_apphint.c                                  | 2 +-
 services/server/env/linux/pvr_debugfs.h                                 | 2 +-
 4 files changed, 3 insertions(+), 3 deletions(-)
 rename build/linux/config/compilers/{aarch64-poky-linux.mk => aarch64-wrs-linux.mk} (100%)

diff --git a/build/linux/config/compilers/aarch64-poky-linux.mk b/build/linux/config/compilers/aarch64-wrs-linux.mk
similarity index 100%
rename from build/linux/config/compilers/aarch64-poky-linux.mk
rename to build/linux/config/compilers/aarch64-wrs-linux.mk
diff --git a/services/server/devices/rgx/rgxfwutils.c b/services/server/devices/rgx/rgxfwutils.c
index 3e2d339..43ebad0 100644
--- a/services/server/devices/rgx/rgxfwutils.c
+++ b/services/server/devices/rgx/rgxfwutils.c
@@ -1154,7 +1154,7 @@ static PVRSRV_ERROR RGXSetupCCB(PVRSRV_RGXDEV_INFO	*psDevInfo,
 		const IMG_CHAR		*pszName)
 {
 	const IMG_UINT32	ui32MaxInputStrSize	= 13;
-	const IMG_UINT32	ui32AppendStrSize	= 7;
+	const IMG_UINT32	ui32AppendStrSize	= 8;
 	const IMG_UINT32	ui32MaxTotalStrSize	= ui32MaxInputStrSize + ui32AppendStrSize +1;
 	const IMG_CHAR		sAppend[] = "Control";
 	PVRSRV_ERROR		eError;
diff --git a/services/server/env/linux/km_apphint.c b/services/server/env/linux/km_apphint.c
index c3eff50..7163a7c 100644
--- a/services/server/env/linux/km_apphint.c
+++ b/services/server/env/linux/km_apphint.c
@@ -855,7 +855,7 @@ static const struct seq_operations apphint_seq_fops = {
 /**
  * apphint_set - Handle a debugfs value update
  */
-static ssize_t apphint_set(const char __user *buffer,
+static int apphint_set(const char __user *buffer,
 			    size_t count,
 			    loff_t *ppos,
 			    void *data)
diff --git a/services/server/env/linux/pvr_debugfs.h b/services/server/env/linux/pvr_debugfs.h
index c5ad960..f29018f 100644
--- a/services/server/env/linux/pvr_debugfs.h
+++ b/services/server/env/linux/pvr_debugfs.h
@@ -49,7 +49,7 @@ CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 #include "img_types.h"
 #include "osfunc.h"
 
-typedef ssize_t (PVRSRV_ENTRY_WRITE_FUNC)(const char __user *pszBuffer,
+typedef IMG_INT (PVRSRV_ENTRY_WRITE_FUNC)(const char __user *pszBuffer,
 					  size_t uiCount,
 					  loff_t *puiPosition,
 					  void *pvData);
-- 
2.14.4

